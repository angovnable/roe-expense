<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROE Solution â€“ Expense Tracker</title>
  <meta name="theme-color" content="#28a745" />

  <!-- PWA (optional) -->
  <link rel="manifest" href="manifest.json" />

  <!-- Toastify CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"/>

  <style>
    :root {
      --primary:#28a745; --secondary:#0099ff;
      --bg:#f4f6f8;     --card:#ffffff; --text:#222;
      --danger:#e74c3c; --accent:#007bff;
    }
    @media (prefers-color-scheme:dark){
      :root{--bg:#1e1e1e;--card:#2a2a2a;--text:#e6e6e6}
    }

    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);margin:0;padding:20px;color:var(--text)}
    .container{max-width:900px;margin:auto}
    .card{background:var(--card);padding:20px;margin-bottom:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    h1{text-align:center;margin:0 0 20px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:18px;border-radius:10px}

    form{display:flex;flex-wrap:wrap;gap:10px}
    input,select,button{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:1em}
    input,select{flex:1 1 200px}
    button{flex:1 1 100px;background:var(--primary);color:#fff;border:none;cursor:pointer;transition:transform .15s}
    button:hover{transform:scale(1.05)}
    button:active::after{content:"";position:absolute;inset:0;border-radius:inherit;background:rgba(255,255,255,.3);animation:ripple .4s ease}
    @keyframes ripple{from{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(2)}}
    button{position:relative;overflow:hidden}

    table{width:100%;border-collapse:collapse;margin-top:15px}
    th,td{padding:8px;text-align:left;border-bottom:1px solid #ddd}
    th{background:#d4edda}
    .user-info{display:flex;align-items:center;gap:10px;margin-bottom:15px}
    .user-info img{width:40px;height:40px;border-radius:50%}
    #logout-btn{background:var(--danger);margin-left:auto}

    .progress-bar{height:10px;background:#ccc;border-radius:10px;margin-top:12px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,#28a745,orange,red);width:0%;transition:width .4s}

    .total-wrap{display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-weight:bold}
    #export-btn{background:var(--accent)}
  </style>
</head>
<body>
  <div class="container">
    <h1>ROE Solution â€“ Expense Tracker</h1>

    <!-- Signâ€‘in Card -->
    <div class="card" id="auth-section">
      <button id="google-btn" style="width:100%;background:#4285f4">Sign in with Google</button>
    </div>

    <!-- Main App Card -->
    <div class="card" id="app-section" style="display:none">
      <!-- User bar -->
      <div class="user-info">
        <img id="user-photo" src="">
        <div>
          <div id="user-name" style="font-weight:bold"></div>
          <div id="user-email" style="font-size:.9em;color:#555"></div>
        </div>
        <button id="logout-btn">Logout</button>
      </div>

      <!-- Expense form -->
      <form id="expense-form">
        <input id="expense-name" placeholder="Expense Name" required>
        <input id="expense-amount" type="number" placeholder="Amount" required>
        <select id="expense-category" required>
          <option value="" disabled selected>Category</option>
          <option>ğŸ” Food</option><option>ğŸš— Transport</option><option>ğŸ® Entertainment</option>
          <option>â›½ Fuel</option><option>ğŸ‘¥ Salaries</option><option>ğŸ–¨ï¸ Printing</option>
          <option>ğŸï¸ Rider</option><option>ğŸ¦ Sacco</option><option>ğŸ›¡ï¸ Insurance</option>
          <option>ğŸ§° Garage</option><option>ğŸ’¸ Loan</option><option>Other</option>
        </select>
        <input id="expense-date" type="date" required>
        <button type="submit">Add Expense</button>
      </form>

      <!-- Budget progress -->
      <div class="progress-bar"><div class="progress-fill" id="budget-progress"></div></div>

      <!-- Expense table -->
      <table>
        <thead><tr><th>#</th><th>Name</th><th>Amount</th><th>Category</th><th>Date</th><th>Action</th></tr></thead>
        <tbody id="expense-list"></tbody>
      </table>

      <!-- Total + Export -->
      <div class="total-wrap">
        Total: KSH <span id="total-amount">0</span>
        <button id="export-btn">Download CSV</button>
      </div>
    </div>
  </div>

  <!-- Toastify script -->
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- Main logic -->
  <script type="module" src="app.js"></script>
  <!-- PWA worker (optional) -->
  <script>i
  f('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}</script>
</body>
</html>
